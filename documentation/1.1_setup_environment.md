# Tahap 1.1: Setup Environment Development (PHP, MySQL, Apache/Nginx)

## Overview
This document provides a step-by-step guide for setting up the development environment using Hostinger VPS and aaPanel control panel. The setup will include PHP, MySQL, and Apache/Nginx web server components required for the KMKB application.

## System Requirements
- Hostinger VPS with Ubuntu 22.04 LTS (recommended)
- Minimum 2GB RAM, 2 CPU cores
- At least 40GB SSD storage
- Root or sudo access

## Installing aaPanel on Hostinger VPS

### Step 1: Update System Packages
Before installing aaPanel, update your system packages to the latest versions:

```bash
sudo apt-get update -y && sudo apt-get upgrade -y
```

### Step 2: Download aaPanel Installation Script
Navigate to the /opt directory and download the aaPanel installation script:

```bash
cd /opt
sudo wget http://www.aapanel.com/script/install-ubuntu_6.0_en.sh
```

Make the script executable:

```bash
sudo chmod +x install-ubuntu_6.0_en.sh
```

### Step 3: Run aaPanel Installation
Execute the installation script:

```bash
sudo bash install-ubuntu_6.0_en.sh
```

During installation, you'll be prompted to confirm the installation directory. Type `y` and press Enter:

```
Do you want to install aaPanel to the /www directory now?(y/n): y
```

The installation process will take approximately 10-15 minutes to complete.

### Step 4: Access aaPanel Web Interface
After successful installation, you'll receive output similar to:

```
Congratulations! Installed successfully!
==================================================================
aaPanel Internet Address: https://YourServerIPAddress:7800/d3f300cd
aaPanel Internal Address: https://YourServerIPAddress:7800/d3f300cd
username: 3b0c4bup
password: 1f08b29c
Warning: If you cannot access the panel, release the following port (7800|888|80|443|20|21) in the security group
==================================================================
Time consumed: 2 Minute!
```

Save these credentials in a secure location. You'll need them to access the aaPanel control panel.

### Step 5: Configure Firewall Settings
Ensure the necessary ports are open in your firewall:

- 7800 (aaPanel web interface)
- 888 (default panel port)
- 80 (HTTP)
- 443 (HTTPS)
- 20/21 (FTP)
- 3306 (MySQL)
- 22 (SSH)

On Hostinger VPS, you can configure firewall settings through the hPanel interface.

## Installing PHP, MySQL, and Apache via aaPanel

### Step 1: Login to aaPanel
1. Open your web browser and navigate to `https://YourServerIPAddress:7800/your_unique_string`
2. Enter the username and password provided during installation

### Step 2: Install Web Server Components
After logging in, aaPanel will display a list of recommended software to install:

1. Click on the "Install" button for the following components:
   - **Web Server**: Choose Apache or Nginx (Apache recommended for compatibility)
   - **Database**: MySQL (recommended version 5.7 or 8.0)
   - **PHP**: Choose the latest stable version (PHP 8.1 or 8.2)
   - **FTP Server**: Pure-Ftpd (optional but recommended)
   - **Cache**: Redis (optional but recommended for performance)

2. The installation process will begin automatically. This may take 10-20 minutes depending on your server specifications.

### Step 3: Verify Installation
Once installation is complete, you can verify the components are working:

1. In aaPanel dashboard, check the "Software" section to confirm all components are installed and running
2. Check the status indicators for Apache/Nginx, MySQL, and PHP

## PHP Configuration

### Step 1: Access PHP Settings
1. In aaPanel, navigate to "Website" → "PHP"
2. You'll see the installed PHP versions and configuration options

### Step 2: Configure PHP Settings
Recommended PHP settings for the KMKB application:

- **Memory Limit**: 512M or higher
- **Max Execution Time**: 300 seconds
- **Max Input Vars**: 3000
- **File Uploads**: Enabled
- **Upload Max Filesize**: 64M
- **Post Max Size**: 64M

To modify these settings:
1. Click on "Configuration" next to your PHP version
2. Select "php.ini" to edit the configuration file
3. Modify the values as needed
4. Save the configuration and restart PHP service

### Step 3: Install Required PHP Extensions
The KMKB application requires several PHP extensions:

1. In aaPanel, navigate to "Website" → "PHP Extensions"
2. Install the following extensions:
   - PDO
   - PDO_MySQL
   - OpenSSL
   - Mbstring
   - Tokenizer
   - XML
   - Ctype
   - JSON
   - GD (for image processing)
   - Zip (for file compression)
   - BCMath (for precision mathematics)

## MySQL Database Configuration

### Step 1: Access MySQL
1. In aaPanel, navigate to "Database" → "MySQL"
2. You can manage databases, users, and settings from this interface

### Step 2: Create Database for KMKB
1. Click on "Add Database"
2. Enter database name (e.g., `kmkb_db`)
3. Create a new database user with a strong password
4. Assign the user to the database with all privileges

### Step 3: Secure MySQL Installation
1. Access MySQL through aaPanel's phpMyAdmin interface
2. Remove anonymous users
3. Disallow root login remotely
4. Remove test database
5. Reload privilege tables

## Web Server Configuration (Apache/Nginx)

### For Apache Configuration:

1. In aaPanel, navigate to "Website" → "Site Configuration"
2. Select your domain or create a new site
3. Configure the document root to point to your application directory
4. Set up virtual hosts as needed

### For Nginx Configuration:

1. In aaPanel, navigate to "Website" → "Nginx"
2. Configure server blocks for your domains
3. Set up proper caching and security headers

## Security Considerations

1. **Change Default aaPanel Port**: Consider changing the default port (7800) for security
2. **SSL Certificates**: Install SSL certificates for all websites
3. **Firewall Configuration**: Only open necessary ports
4. **Regular Updates**: Keep aaPanel and all components updated
5. **Backup Strategy**: Set up regular backups of your databases and files

## Testing the Environment

1. Create a simple PHP info file to verify PHP installation:
   ```php
   <?php
   phpinfo();
   ?>
   ```
   Save this as `info.php` in your web root directory.

2. Access the file through your browser: `http://yourdomain.com/info.php`

3. Verify all required PHP extensions are loaded

4. Test database connection with a simple PHP script

## Next Steps

After successfully setting up the environment, proceed with:

1. Setting up the Laravel/CodeIgniter/Symfony framework
2. Configuring version control (Git)
3. Setting up the project directory structure
4. Creating the initial database schema

## Troubleshooting

### Common Issues:

1. **Unable to Access aaPanel**: Check if port 7800 is open in firewall
2. **PHP Extensions Not Loading**: Restart PHP service after installation
3. **MySQL Connection Issues**: Verify MySQL is running and user permissions
4. **Web Server Not Starting**: Check configuration files for syntax errors

### Useful Commands:

```bash
# Check service status
sudo systemctl status apache2
sudo systemctl status nginx
sudo systemctl status mysql

# Restart services
sudo systemctl restart apache2
sudo systemctl restart nginx
sudo systemctl restart mysql

# Check aaPanel status
sudo /etc/init.d/bt status
```

## Conclusion

With this setup, you now have a fully functional development environment with PHP, MySQL, and Apache/Nginx running on a Hostinger VPS with aaPanel control panel. This environment is ready for developing the KMKB application with all necessary components properly configured.
